<view class="container">
  <view class="order-status">
    <text>订单状态：</text>
    <text class="status-text">{{statusText}}</text>
  </view>
 
  <!-- 操作按钮区 -->
  <view class="order-actions" wx:if="{{status === 'unprocessed' || status === 'processing'}}">
    <button class="btn btn-primary" bindtap="onAcceptOrder" wx:if="{{status === 'unprocessed'}}">接单</button>
    <button class="btn btn-warn" bindtap="onRejectOrder" wx:if="{{status === 'unprocessed'}}">拒单</button>
    <button class="btn btn-success" bindtap="onCompleteOrder" wx:if="{{status === 'processing'}}">完成订单</button>
    <button class="btn btn-default" bindtap="goToChatDetail">联系买家</button>
    <button class="btn btn-default" bindtap="showPriceModal">修改总价</button>
  </view>

  <view wx:if="{{isCustomized}}" class="customized-detail-tag">定制化订单</view>
  
  <!-- 修改总价弹窗 -->
  <view wx:if="{{showPriceModal}}" class="modal-mask">
    <view class="modal-box">
      <view class="modal-title">修改订单总价</view>
      <input class="modal-input" type="digit" value="{{newTotalPrice}}" bindinput="onPriceInput" placeholder="请输入新总价" />
      <view class="modal-actions">
        <button class="btn btn-primary" bindtap="submitPriceChange">确认</button>
        <button class="btn btn-default" bindtap="hidePriceModal">取消</button>
      </view>
    </view>
  </view>

  <view class="service-info">
    <text class="title">服务信息</text>
    <view class="service-item">
      <image class="service-img" src="https://636c-cloudbase-5gkjpend4a9022ba-1366660379.tcb.qcloud.la/images/service.png"></image>
      <view class="service-desc">
        <text class="service-name">专业家庭寄养服务（小型犬）</text>
        <text class="service-shop">阳光宠物之家</text>
        <text class="service-price">¥{{servicePrice}}/天 共{{serviceDays}}天</text>
      </view>
    </view>
  </view>

  <view class="order-details">
    <text class="title">订单详情</text>
    <view class="detail-item">
      <text class="label">订单编号：</text>
      <text>{{orderNo}}</text>
    </view>
    <view class="detail-item">
      <text class="label">下单时间：</text>
      <text>{{orderTime}}</text>
    </view>
    <view class="detail-item">
      <text class="label">服务日期：</text>
      <text>{{serviceDateRange}}</text>
    </view>
    <view class="detail-item">
      <text class="label">寄养宠物：</text>
      <text>{{petName}}</text>
    </view>
    <view class="detail-item">
      <text class="label">联系人：</text>
      <text>{{contactName}}</text>
    </view>
    <view class="detail-item">
      <text class="label">联系电话：</text>
      <text>{{contactPhone}}</text>
    </view>
    <view class="detail-item total-price">
      <text class="label">总价：</text>
      <text class="price">¥{{totalPrice}}</text>
    </view>
  </view>
</view>